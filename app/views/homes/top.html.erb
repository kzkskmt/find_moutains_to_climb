<body id="page-top">
  <!-- Masthead-->
  <header class="masthead">
    <div class="container px-4 px-lg-5 d-flex h-100 align-items-center justify-content-center">
      <div class="d-flex justify-content-center">
        <div class="text-center">
          <h2 class="text-white mx-auto mt-2">登りたい山がみつかるサービス</h2>
          <h1 class="text-white mx-auto mb-5">「Find Mts」</h1>
        </div>
      </div>
    </div>
  </header>

  <!-- SearchBox-->
  <section class="searchform-section" id="search">
    <div class="container px-4 px-lg-5">
      <h2>キーワードから探す</h2>
      <div class="row gx-4 gx-lg-5">
        <div class="col-md-10 col-lg-10 mx-auto text-center">
          <div class="form-search">
            <div class="row">
              <%= render 'shared/search_form', q: @q, url: mountains_path %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Area-->
  <section class="area-section" id="area">
    <div class="container px-4 px-lg-5">
      <h2>エリアから探す</h2>
      <!-- Index Grid Items-->
      <div class="row justify-content-center px-5">
        <!-- Index Item-->
        <% @area.each do |area| %>
          <div class="col-md-6 col-lg-3 mb-5" id="area-item">
            <div class="index-item-caption d-flex align-items-center justify-content-center">
              <div class="index-item-caption-content text-center text-white">
                <%= link_to mountains_path(area: area), class: 'btn btn-outline-primary', 'data-turbolinks': false do %>
                  <%= add_space(area) %>
                <% end %>
              </div>                    
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </section>

  <!-- Maps-->
  <section class="map-section" id="map">
    <div class="container px-4 px-lg-5">
      <h2>地図から探す</h2>
      <!-- Featured Map Row-->
      <div class="row gx-0 mb-4 mb-lg-5 px-5 align-items-center">
        <!-- googlemapを埋め込む場所　-->
        <input id="pac-input" class="form-control" type="text" placeholder="キーワード" />
        <div id='googlemap' style="height:420px" class='mb-3 mb-lg-0 rounded-4'></div>
      </div>
    </div>
  </section>

  <!-- Index-->
  <section class="index-section" id="popular-mountain">
    <div class="container px-4 px-lg-5">
      <h2 class="mb-2">話題の山 on twitter</h2>
      <p class="mb-4">過去１週間、最も多くツイートされた山を表示しています</p>
      <div class="row">
        <% if @recommended_mountains.present? %>
          <%= render @recommended_mountains %>
        <% end %>
      </div>
    </div>
  </section>

  <script>
    // mountainデータを格納する箱 markerData
    let markerData = [];
    // markerDataにmountainデータをループ処理で格納
    <% @mountains.each do |mountain| %>
      // 再宣言するのでvar
      var obj = {
        id: <%= mountain.id %>,
        name: '<%= mountain.name %>',
        elevation: '<%= mountain.elevation %>',
        level: '<%= mountain.level %>',
        lat: <%= mountain.peak_location_lat %>,
        lng: <%= mountain.peak_location_lng %>
      };
      markerData.push(obj)
    <% end %>

    // 表示する地図の中心位置とズームレベルを定義
    let center_of_map = {
      lat: <%= @center_of_map_lat %>,
      lng: <%= @center_of_map_lng %>
    };
    let zoom_level_of_map = <%= @zoom_level_of_map %>;
  </script>
  </body>